

# 1. –°–æ–∑–¥–∞–Ω–∏–µ Production Order

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:

* –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∑–∞–∫–∞–∑–∞
* –≤—ã–±–∏—Ä–∞–µ—Ç —Ü–µ—Ö
* –≤–≤–æ–¥–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

‚û°Ô∏è —Å–æ–∑–¥–∞—ë—Ç—Å—è `PRODUCTION_ORDERS`
**–¶–µ—Ö –∏–∑–≤–µ—Å—Ç–µ–Ω —Å—Ä–∞–∑—É**

---

# 2. –í—ã–¥–∞—á–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

–ö–æ–≥–¥–∞ –Ω–∞–∂–∏–º–∞—é—Ç ¬´–í—ã–¥–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã¬ª:

```text
INVENTORY_MOVEMENTS
- from_warehouse_id
- to_department_id = production_order.department_id
- production_order_id
```

`INVENTORY_MOVEMENTS` **—Å—Å—ã–ª–∞–µ—Ç—Å—è** –Ω–∞ `PRODUCTION_ORDERS`, –∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –µ–≥–æ.

---

# 3. –†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∑–∞–∫–∞–∑–∞

–¢–µ–ø–µ—Ä—å –≤—Å—ë —á–∏—Å—Ç–æ:

* `PRODUCT_DEPARTMENT_COSTS`
* `product_id` (—á–µ—Ä–µ–∑ SalesOrderItem)
* `department_id` (–ø—Ä—è–º–æ –∏–∑ ProductionOrder)

–ù–∏–∫–∞–∫–æ–π –º–∞–≥–∏–∏, –≤—Å—ë –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–æ.

---

## –ö–∞–∫ —ç—Ç–æ –ª—è–∂–µ—Ç –≤ EF Core / Domain

### ProductionOrderEntity

```csharp
class ProductionOrder {
    Guid Id;
    Guid SalesOrderItemId;
    Guid DepartmentId;

    SalesOrderItem SalesOrderItem;
    Department Department;

    ICollection<InventoryMovement> InventoryMovements;
    ICollection<CuttingOperation> CuttingOperations;
    ICollection<SewingOperation> SewingOperations;
    ICollection<PackagingOperation> PackagingOperations;
}
```

# 4. –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ CUTTING_OPERATION:

**Application Layer –¥–µ–ª–∞–µ—Ç –¢–†–ê–ù–ó–ê–ö–¶–ò–Æ:**

1. INSERT –≤ `CUTTING_OPERATIONS`
2. UPDATE `PRODUCTION_ORDERS.qty_cut += qty_cut`
3. –ü—Ä–æ–≤–µ—Ä–∫–∞:

   * `qty_cut <= qty_planned`
4. –ï—Å–ª–∏ `qty_cut > 0` ‚Üí —Å—Ç–∞—Ç—É—Å `CUTTING`
5. –ï—Å–ª–∏ `qty_cut == qty_planned` ‚Üí —Å—Ç–∞—Ç—É—Å `SEWING`

üìå –≠—Ç–æ **Application Service**, –Ω–µ –∫–ª–∏–µ–Ω—Ç.

---

##  –ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è —Ö—Ä–∞–Ω–∏—Ç—å ‚Äú–æ—Å—Ç–∞—Ç–æ–∫‚Äù –æ—Ç–¥–µ–ª—å–Ω–æ

–¢—ã —Å–ø—Ä–∞—à–∏–≤–∞–ª:

> –∫—É–¥–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è —Ü–∏—Ñ—Ä–∞, —á—Ç–æ–±—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—Ä–æ–µ–Ω–Ω–æ–≥–æ –∏ –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è?

### –û—Ç–≤–µ—Ç:

* **–ü–æ–∫—Ä–æ–µ–Ω–æ** ‚Üí `production_order.qty_cut`
* **–û—Å—Ç–∞–ª–æ—Å—å** ‚Üí `qty_planned - qty_cut`

‚ùó –û—Å—Ç–∞—Ç–æ–∫ ‚Äî **–≤—ã—á–∏—Å–ª—è–µ–º–æ–µ –ø–æ–ª–µ**, –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è.

---

## 7Ô∏è‚É£ –ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Ñ–æ—Ä–º–µ

| –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑ | –ü–ª–∞–Ω | –ü–æ–∫—Ä–æ–µ–Ω–æ | –û—Å—Ç–∞–ª–æ—Å—å |
| ---------------------- | ---- | -------- | -------- |
| PO-001                 | 8    | 4        | 4        |
| PO-002                 | 2    | 2        | 0        |

---

## 8Ô∏è‚É£ –ì–¥–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞

| –ß–∞—Å—Ç—å              | –ì–¥–µ            |
| ------------------ | -------------- |
| –§–æ—Ä–º–∞              | Client         |
| –í–∞–ª–∏–¥–∞—Ü–∏–∏          | Application    |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ qty_cut | Application    |
| –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã         | Domain         |
| SQL                | Infrastructure |

‚ùó –ö–ª–∏–µ–Ω—Ç **–Ω–∏–∫–æ–≥–¥–∞**:

* –Ω–µ —Å—É–º–º–∏—Ä—É–µ—Ç
* –Ω–µ –º–µ–Ω—è–µ—Ç ProductionOrder –Ω–∞–ø—Ä—è–º—É—é


**–í –æ—Ç—á–µ—Ç–∞—Ö:**
```
–û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Ä–∞—Å–∫—Ä–æ–µ = qty_cut - qty_sewn
–û—Å—Ç–∞—Ç–æ–∫ —É —à–≤–µ–π = qty_sewn - qty_packed
```
**–ü—Ä–∏–º–µ—Ä:**

> –∏–∑ 4 –ø–æ–∫—Ä–æ–µ–Ω–Ω—ã—Ö:
> —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ 1 ‚Äî 2
> —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ 2 ‚Äî 1
> 1 –æ—Å—Ç–∞–ª–æ—Å—å

–í –ë–î:

**CUTTING_OPERATIONS**

| employee | qty_cut |
| -------- | ------- |
| 1        | 2       |
| 2        | 1       |
| 3        | 1       |

**SEWING_OPERATIONS**

| employee | qty_sewn |
| -------- | -------- |
| 1        | 2        |
| 2        | 1        |

–ò—Ç–æ–≥–∏:

* `qty_cut = 4`
* `qty_sewn = 3`
* –æ—Å—Ç–∞—Ç–æ–∫ = 1



---


# 5. –ó–∞–∫—Ä—ã—Ç–∏–µ `PRODUCTION_ORDERS`

### ‚ùå –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —É–¥–∞–ª—è–µ–º

### ‚úÖ –¢–æ–ª—å–∫–æ –º–µ–Ω—è–µ–º —Å—Ç–∞—Ç—É—Å

```text
qty_packed == qty_planned ‚Üí status = FINISHED
```

–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑ ‚Äî **–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç**.

---

## –ú–∞—Ç–µ—Ä–∏–∞–ª—ã ‚Äî –∫–æ–≥–¥–∞ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è?

‚úî **–û–î–ò–ù –†–ê–ó**, –ø—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ:

```
NEW ‚Üí MATERIAL_ISSUED
```

–°–ø–∏—Å–∞–Ω–∏–µ:

* —á–µ—Ä–µ–∑ `INVENTORY_MOVEMENTS`
* –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ `PRODUCT_MATERIALS √ó qty_planned`

‚ùó –ü–æ–≤—Ç–æ—Ä–Ω–æ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–µ —Ç—Ä–æ–≥–∞–µ–º.

---




# 6. –ö–∞–∫ —Ç–µ–ø–µ—Ä—å –≤—ã–≥–ª—è–¥–∏—Ç –ø–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ (–æ—á–µ–Ω—å –≤–∞–∂–Ω–æ)

### üîÅ –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ

1. `PACKAGING_OPERATIONS`
   ‚Üí —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç *–∫—Ç–æ –∏ —Å–∫–æ–ª—å–∫–æ —É–ø–∞–∫–æ–≤–∞–ª*

2. –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `FINISHED_GOODS`
   ‚Üí *–¥–æ–∫—É–º–µ–Ω—Ç –≤—ã–ø—É—Å–∫–∞*

3. **–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `WAREHOUSE_PRODUCTS.qty += qty`**
   ‚Üí *—Ä–µ–∞–ª—å–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫*

---

### üöö –û—Ç–≥—Ä—É–∑–∫–∞ –∫–ª–∏–µ–Ω—Ç—É

* –±–µ—Ä—ë–º –¥–∞–Ω–Ω—ã–µ **—Ç–æ–ª—å–∫–æ –∏–∑ `WAREHOUSE_PRODUCTS`**
* —É–º–µ–Ω—å—à–∞–µ–º `qty`
* —Å–≤—è–∑—ã–≤–∞–µ–º —Å `SALES_ORDER_ITEMS`

---


# 7. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ 

–î–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ       | –¢–∞–±–ª–∏—Ü–∞                    |
| ---------------- | -------------------------- |
| –î–æ–∫—É–º–µ–Ω—Ç         | `INVENTORY_MOVEMENTS`      |
| –°—Ç—Ä–æ–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ | `INVENTORY_MOVEMENT_ITEMS` |
| –û—Å—Ç–∞—Ç–∫–∏          | `WAREHOUSE_MATERIALS`      |

üëâ **–° —Ç–æ–≤–∞—Ä–∞–º–∏ –¢–û–ß–ù–û –¢–ê–ö –ñ–ï**

---

# 8. –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `FINISHED_GOODS_MOVEMENTS`

### üîÅ –ê–ª–≥–æ—Ä–∏—Ç–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç –¥–æ–∫—É–º–µ–Ω—Ç:

   ```text
   FINISHED_GOODS_MOVEMENTS
   ```
2. –°–∏—Å—Ç–µ–º–∞:

   * –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –Ω–∞ `from_warehouse` —Ö–≤–∞—Ç–∞–µ—Ç `qty`
   * **–ù–ï –ú–ï–ù–Ø–ï–¢ –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞–ø—Ä—è–º—É—é**
3. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:

   * `WAREHOUSE_PRODUCTS.qty -= qty` (from)
   * `WAREHOUSE_PRODUCTS.qty += qty` (to)

üìå **–ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã ‚Äî –¥–≤–∏–∂–µ–Ω–∏–µ**, –Ω–µ –æ—Å—Ç–∞—Ç–æ–∫.

---

## –ö–∞–∫ —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤ –∫–æ–¥–µ (–≤–∞–∂–Ω–æ –¥–ª—è —Ç–µ–±—è)

### Domain / Application —Å–ª–æ–π

```text
MoveFinishedGoodsCommand
- fromWarehouseId
- toWarehouseId
- productId
- qty
```

### Application service:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å—Ç–∞—Ç–æ–∫ (`WAREHOUSE_PRODUCTS`)
2. –°–æ–∑–¥–∞—Ç—å `FINISHED_GOODS_MOVEMENTS`
3. –û–±–Ω–æ–≤–∏—Ç—å `WAREHOUSE_PRODUCTS` –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

---


# 9. –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –æ—Ç–≥—Ä—É–∑–∫–∏:

1. –ü—Ä–æ–≤–µ—Ä–∫–∞:

   ```text
   WAREHOUSE_PRODUCTS.qty >= SHIPMENT_ITEMS.qty
   ```
2. –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏:

   ```text
   WAREHOUSE_PRODUCTS.qty -= qty
   SALES_ORDER_ITEMS.qty_shipped += qty
   ```
3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤:

   * `SALES_ORDER_ITEMS`
   * `SALES_ORDERS` (—á–∞—Å—Ç–∏—á–Ω–æ / –ø–æ–ª–Ω–æ—Å—Ç—å—é)

üìå –í—Å—ë ‚Äî –≤ **–æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**.

---

# 10. –ö–∞–∫ —Å—á–∏—Ç–∞—Ç—å qty_shipped –≤ SALES_ORDER_ITEMS

### üî• –ò—Å—Ç–∏–Ω–∞ ‚Äî –≤ SHIPMENT_ITEMS

```sql
SELECT SUM(qty)
FROM SHIPMENT_ITEMS
WHERE sales_order_item_id = :id
```

### –ê –ø–æ–ª–µ `qty_shipped` –≤ `SALES_ORDER_ITEMS`?

üëâ **–ö—ç—à / –∞–≥—Ä–µ–≥–∞—Ç –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏**

–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:

* –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –æ—Ç–≥—Ä—É–∑–∫–∏
* –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

---

üí° **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≥—Ä—É–∑–∫–∏**:

```text
SHIPMENT #1
 ‚îú‚îÄ Item A (Product X, Warehouse 1, qty = 3)
 ‚îú‚îÄ Item A (Product X, Warehouse 2, qty = 2)
```

‚û°Ô∏è –û–¥–∏–Ω –∑–∞–∫–∞–∑
‚û°Ô∏è –û–¥–Ω–∞ –æ—Ç–≥—Ä—É–∑–∫–∞
‚û°Ô∏è –ù–µ—Å–∫–æ–ª—å–∫–æ —Å–∫–ª–∞–¥–æ–≤
‚û°Ô∏è –ß–∞—Å—Ç–∏—á–Ω–∞—è –æ—Ç–≥—Ä—É–∑–∫–∞
‚û°Ô∏è –ü–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å

---

# 11. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏

### –ü—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ (`RETURNS.status = ACCEPTED`):

1. ‚ûï –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –æ—Å—Ç–∞—Ç–∫–∏ **–≥–æ—Ç–æ–≤–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏**
2. ‚ûñ –£–º–µ–Ω—å—à–∞–µ–º:

   * `SHIPMENT_ITEMS.qty` (–ª–æ–≥–∏—á–µ—Å–∫–∏)
   * `SALES_ORDER_ITEMS.qty_shipped`

üìå –§–∏–∑–∏—á–µ—Å–∫–∏ —Å—Ç–∞—Ä—ã–µ —Å—Ç—Ä–æ–∫–∏ –Ω–µ —Ç—Ä–æ–≥–∞–µ–º ‚Äî –≤—Å—ë —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏.

### üîπ FINISHED_GOODS_STOCK (–æ—Å—Ç–∞—Ç–∫–∏)

* –æ—Ç–≥—Ä—É–∑–∫–∞ ‚Üí `qty -=`
* –≤–æ–∑–≤—Ä–∞—Ç ‚Üí `qty +=`
* –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –º–µ–∂–¥—É —Å–∫–ª–∞–¥–∞–º–∏ ‚Üí `- / +`

---

# 8Ô∏è‚É£ –ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ UI (–∫–æ—Ä–æ—Ç–∫–æ)

### –≠–∫—Ä–∞–Ω ¬´–í–æ–∑–≤—Ä–∞—Ç—ã¬ª

1. –í—ã–±–æ—Ä:

   * –æ—Ç–≥—Ä—É–∑–∫–∏
   * –∏–ª–∏ –∑–∞–∫–∞–∑–∞
2. –¢–∞–±–ª–∏—Ü–∞ –ø–æ–∑–∏—Ü–∏–π:

   * —Ç–æ–≤–∞—Ä
   * —Å–∫–æ–ª—å–∫–æ –±—ã–ª–æ –æ—Ç–≥—Ä—É–∂–µ–Ω–æ
   * —Å–∫–æ–ª—å–∫–æ —É–∂–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ
3. –í–≤–æ–¥:

   * qty
   * —Å–∫–ª–∞–¥
   * —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞

---
# 12. –†–∞—Å—á–µ—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤

## 3.1 –¢–∞–±–µ–ª—å —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (–¢–û–õ–¨–ö–û —á–∞—Å—ã)

```dbml
Table TIMESHEETS 
```

üìå –¢–∞–±–µ–ª—å:

* **–≤–≤–æ–¥–∏—Ç—Å—è –≤—Ä—É—á–Ω—É—é**
* **–Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ –∏–∑–¥–µ–ª–∏—è**
* —é—Ä–∏–¥–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω

---

## 3.2 –§–∞–∫—Ç –≤—ã–ø—É—Å–∫–∞ (—É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å)

```text
SEWING_OPERATIONS
- employee_id
- qty_sewn
- hours_worked (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- operation_date
```

üìå –≠—Ç–æ:

* –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–∞–∫—Ç
* –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –Ω–æ—Ä–º—ã

---

# 4Ô∏è‚É£ –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è ¬´–ü–õ–ê–ù¬ª?

–ü–ª–∞–Ω —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å üëç

```dbml
PRODUCTS.plan_per_hour   // –∏–∑–¥–µ–ª–∏–π –≤ —á–∞—Å
```

üëâ –ü–ª–∞–Ω –Ω–∞ –¥–µ–Ω—å —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ç–∞–∫:

```
planned_qty = hours_worked * plan_per_hour
```

---

## –ö–∞–∫ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (–∫–ª—é—á–µ–≤–∞—è –ª–æ–≥–∏–∫–∞)

### –î–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∑–∞ –¥–µ–Ω—å:

1. –ë–µ—Ä—ë–º —Ç–∞–±–µ–ª—å:

```text
hours_worked
```

2. –ë–µ—Ä—ë–º –ø–ª–∞–Ω:

```text
planned_qty = hours_worked * plan_per_hour
```

3. –ë–µ—Ä—ë–º —Ñ–∞–∫—Ç:

```text
actual_qty = SUM(sewing_operations.qty_sewn)
```

4. –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º:

```text
extra_qty = max(0, actual_qty - planned_qty)
```

---

## –ë–∞–ª–∞–Ω—Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å, –∞ –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å)

```text
balance = SUM(accruals) - SUM(payments)
```

---


<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="MyFactory.MauiClient.Pages.Reference.Settings.SettingEditModal"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:view_model="clr-namespace:MyFactory.MauiClient.ViewModels.Reference.Settings"
    x:DataType="view_model:SettingEditModalViewModel"
    BackgroundColor="#80000000"
    Title="Редактирование настройки">

    <ContentPage.Resources>
        <Style TargetType="Border" x:Key="ModalBorderStyle">
            <Setter Property="Stroke" Value="Transparent" />
            <Setter Property="Background" Value="{AppThemeBinding Light=#FFFFFF, Dark=#111827}" />
            <Setter Property="Padding" Value="24" />
            <Setter Property="StrokeShape">
                <Setter.Value>
                    <RoundRectangle CornerRadius="16" />
                </Setter.Value>
            </Setter>
            <Setter Property="Shadow">
                <Setter.Value>
                    <Shadow Brush="{AppThemeBinding Light=#40000000, Dark=#80000000}" Offset="0,4" Radius="18" />
                </Setter.Value>
            </Setter>
        </Style>
    </ContentPage.Resources>

    <Grid Padding="24" RowDefinitions="*" ColumnDefinitions="*">
        <Border Grid.Row="0" Grid.Column="0" Style="{StaticResource ModalBorderStyle}" VerticalOptions="Center" HorizontalOptions="Center">
            <VerticalStackLayout Spacing="14" WidthRequest="360">
                <Label FontSize="20" FontAttributes="Bold" Text="Редактирование настройки" />

                <VerticalStackLayout Spacing="4">
                    <Label FontSize="12" Text="Ключ" TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}" />
                    <Label FontAttributes="Bold" Text="{Binding Key}" />
                </VerticalStackLayout>

                <VerticalStackLayout Spacing="4">
                    <Label FontSize="12" Text="Значение" TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}" />
                    <Entry Text="{Binding Value}" />
                </VerticalStackLayout>

                <VerticalStackLayout Spacing="4">
                    <Label FontSize="12" Text="Описание" TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}" />
                    <Label Text="{Binding Description}" TextColor="{AppThemeBinding Light=#374151, Dark=#D1D5DB}" LineBreakMode="WordWrap" />
                </VerticalStackLayout>

                <ActivityIndicator IsRunning="{Binding IsInProgress}" IsVisible="{Binding IsInProgress}" />

                <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                    <Button
                        Command="{Binding SaveCommand}"
                        IsEnabled="{Binding IsInProgress, Converter={StaticResource InvertedBoolConverter}}"
                        Text="Сохранить" />
                    <Button
                        Grid.Column="1"
                        BackgroundColor="{AppThemeBinding Light=#E5E7EB, Dark=#374151}"
                        Command="{Binding CancelCommand}"
                        Text="Отмена"
                        TextColor="{AppThemeBinding Light=#111827, Dark=#F9FAFB}" />
                </Grid>
            </VerticalStackLayout>
        </Border>
    </Grid>
</ContentPage>
